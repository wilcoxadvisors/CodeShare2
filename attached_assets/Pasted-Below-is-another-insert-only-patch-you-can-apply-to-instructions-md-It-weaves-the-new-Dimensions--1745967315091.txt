Below is another insert-only patch you can apply to instructions.md.
It weaves the new Dimensions + Smart Events concepts and the extended AI feature set into the existing roadmap, without deleting any prior text.

0. Quick index of where to paste

#	Paste after heading	Why
A	â€œPhase B: Core Accounting Module (IN PROGRESS)â€	Introduce Dimensions & Smart Events backlog
B	â€œPhase F: AI/ML & Predictive Forecastingâ€	Capture new AI/automation pillars
C	â€œGeneral Guidelines for Agent â†’ Prioritizeâ€	Remind agents to consider Dimensions hooks
D	Very bottom (after Rolling Changelog)	Add glossary appendix for future reference
Copy each code-block as-is into the indicated spot.

A. â–¸ Phase B patch â€” immediately after the bullet list for Task B.2 â€œGeneral Ledger / Journal Entriesâ€
yaml
Copy
Edit
---

ğŸ”¹ **Task B.4 â€“ Dimensions & Smart Events (BACKLOG, SPECS READY)**  
   *Objective*: replicate Sage Intacct-style multi-dimensional tagging and
   event-driven automation without expanding the CoA.

   **Scope of MVP**

   1. **Dimensions Framework**  
      â€¢ Core tables (`dimensions`, `dimension_values`, `tx_dimension_link`).  
      â€¢ System dimensions: Department, Location, Class, Customer, Vendor,
        Employee, Project, Item.  
      â€¢ User-defined dimension creation UI (admin-only).  
      â€¢ Validation rules: required vs optional, active vs inactive.  

   2. **Smart Rules (validation layer)**  
      â€¢ JSON-based rule engine to block invalid dimension/GL combos.  
      â€¢ Example rule stub:  
        ```json
        { "account": "6000", "location": ["LON", "NYC"], "allow": false }
        ```

   3. **Smart Events (event layer)**  
      â€¢ Trigger types: `onCreate`, `onUpdate` for JE, AP, AR objects.  
      â€¢ Condition builder (simple expression parser).  
      â€¢ Actions: `email`, `fieldUpdate`, `webhook`.  
      â€¢ Async dispatcher queue (BullMQ).  

   4. **AI Hooks**  
      â€¢ Every Smart Event emits an **EventBridge** message (`ai.ingest.*`) so the
        ML service can learn patterns and surface anomalies in real-time.  

   **Exit Criteria**

   - Tag â‰¥ 90 % of new JE records with at least one dimension.  
   - Rule engine blocks invalid department-location pairs (unit tests).  
   - Example Smart Event: send Slack alert when `amount > $10k & location=INTL`.  
   - Cypress E2E: create JE â†’ trigger event â†’ verify webhook fired.

---
B. â–¸ Phase F patch â€” right after the â€œTask F.3 Additional AI Featuresâ€ list
yaml
Copy
Edit
---

ğŸ”¹ **Task F.4 â€“ AI-Powered Ledger & Copilot (SPEC DRAFTED)**  
   - **Anomaly Detection Service**  
     â€¢ Online IsolationForest scoring for every posted JE.  
     â€¢ Flags surfaced in `AIInsightsWidget` âœ” (streaming channel already done).  

   - **Sage-style Copilot MVP**  
     â€¢ `/api/ai/qna` endpoint (LLM via OpenAI - gpt-4o3).  
     â€¢ Natural-language query â†’ SQL translation layer (pgvector + RAG over schema docs).  

   - **Auto Reconciliation Pilot**  
     â€¢ Bank feed stub (Plaid sandbox) â†’ auto-match to JE lines.  
     â€¢ Success metric: â‰¥ 80 % auto-match on sample data set.  

ğŸ”¹ **Task F.5 â€“ AP/AR Automation Enhancements**  
   - Invoice OCR ingestion micro-service (Tesseract + AWS Textract fallback).  
   - Rules-based approval flow re-using Smart Events engine (see B.4).  
   - Dunning scheduler integrated with EventBridge.

ğŸ”¹ **Task F.6 â€“ Real-Time Dashboards & ML Streaming KPIs**  
   - Pre-built widgets (cash burn, AR aging, anomaly counts).  
   - Drill-down to dimension-filtered transaction lists.

(All F.4-F.6 tasks rely on the Dimensions framework from Task B.4.)

---
C. â–¸ General Guidelines patch â€” append to the â€œPrioritizeâ€ paragraph
pgsql
Copy
Edit
â€¢ **Dimensions-Aware Thinking**: when creating new tables, APIs, or tests,
  always ask â€œdoes this need dimension tags or Smart Event hooks?â€  Add them
  early to avoid refactors.
D. â–¸ NEW Appendix â€“ â€œDimensions & Smart Events Glossaryâ€ â€” paste at file end, after Rolling Changelog
pgsql
Copy
Edit
---

## ğŸ“š  Appendix â€“ Dimensions & Smart Events Glossary

| Term | Definition |
|------|------------|
| **Dimension** | Categorical attribute (e.g., Department, Location) attached to any transaction for multi-axis reporting. |
| **Smart Rule** | Validation rule that restricts which dimension combinations are allowed on specific GL accounts. |
| **Smart Event** | No-code automation: *Trigger* + *Condition* + *Action* (email, webhook, field update). |
| **AI EventBridge** | Internal pub/sub topic (`ai.ingest.*`) that streams Smart Event payloads to the ML service for continual learning. |
| **Copilot** | Chat-style assistant that answers NL questions and triggers tasks inside the app. |
| **Anomaly Score** | 0-1 value generated by IsolationForest; > 0.8 surfaces as a high-risk flag in the UI. |

(Keep this glossary alphabetised as new terms emerge.)
âœ”ï¸ Thatâ€™s it
These four patches slot neatly into the existing instructions.md, enriching it with:

a clear backlog item for Dimensions & Smart Events

expanded AI/automation roadmap

a reminder for every dev to think â€œdimension-first, event-firstâ€

a handy glossary for future readers