 [vite] connecting...
 [vite] connected.
 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
 ENTITY_CONTEXT_AUTH_STATE: Object
 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= false AuthNotLoading= false QueryEnabled= false
 EntityLayout: Context still loading - showing spinner Object
 EntityLayout: Setting client ID from URL params: 73
 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: No client selected, skipping entity selection logic
 DEBUG: Entities context state:
    - Total entities: 0
    - Filtered entities: 0
    - Selected client: null
    - Current entity: undefined
    - Initial loading complete: false
    - Loading: true
    - Query fetching: false
 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Checking authentication status...
 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Debug session ID found: tP1jgDqVe-m_Eiapx0MN-ZucN7mshFYY
 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Making fetch request to /api/auth/me with credentials
react-router-dom.js?v=159031c7:4394 ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
warnOnce @ react-router-dom.js?v=159031c7:4394
 ENTITY_CONTEXT_AUTH_STATE: Object
 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= false AuthNotLoading= false QueryEnabled= false
 EntityLayout: Context still loading - showing spinner Object
 EntityLayout: Setting client ID from URL params: 73
 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Loading state detected, deferring entity selection logic: Object
 DEBUG: Entities context state:
    - Total entities: 0
    - Filtered entities: 0
    - Selected client: 73
    - Current entity: undefined
    - Initial loading complete: false
    - Loading: true
    - Query fetching: false
 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= false AuthNotLoading= false QueryEnabled= false
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
AuthContext.tsx:60 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Auth check response status: 200
AuthContext.tsx:67 ARCHITECT_DEBUG_AUTH_CTX_CHECK: User authenticated: Object
AuthContext.tsx:73 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Authentication successful, triggering query invalidation to ensure fresh data
AuthContext.tsx:79 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Invalidated and refetched entity queries
AuthContext.tsx:147 ARCHITECT_DEBUG_AUTH_CTX_CHECK: Auth check completed, setting isLoading to false
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityLayout.tsx:76 EntityLayout: Context still loading - showing spinner Object
EntityLayout.tsx:35 EntityLayout: Setting client ID from URL params: 73
EntityContext.tsx:78 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
EntityContext.tsx:149 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_EXECUTION: Query function executing with:
EntityContext.tsx:150 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_EXECUTION: - User: ID 1, Username admin
EntityContext.tsx:151 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_EXECUTION: - Auth loading state: false
EntityContext.tsx:152 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_EXECUTION: - Query enabled: true
EntityContext.tsx:153 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_EXECUTION: - Is Guest user: false
EntityContext.tsx:276 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
EntityContext.tsx:293 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Loading state detected, deferring entity selection logic: Object
EntityContext.tsx:321 DEBUG: Entities context state:
    - Total entities: 0
    - Filtered entities: 0
    - Selected client: 73
    - Current entity: undefined
    - Initial loading complete: false
    - Loading: true
    - Query fetching: true
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
EntityLayout.tsx:76 EntityLayout: Context still loading - showing spinner Object
EntityContext.tsx:123 ARCHITECT_DEBUG_ENTITY_CTX_CLIENTS_RECEIVED: Fetched clients length: 5
EntityContext.tsx:124 ARCHITECT_DEBUG_ENTITY_CTX_CLIENTS_RECEIVED: First few clients: Array(2)
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityLayout.tsx:76 EntityLayout: Context still loading - showing spinner Object
EntityLayout.tsx:35 EntityLayout: Setting client ID from URL params: 73
EntityContext.tsx:78 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
EntityContext.tsx:276 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
EntityContext.tsx:293 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Loading state detected, deferring entity selection logic: Object
EntityContext.tsx:321 DEBUG: Entities context state:
    - Total entities: 0
    - Filtered entities: 0
    - Selected client: 73
    - Current entity: undefined
    - Initial loading complete: false
    - Loading: true
    - Query fetching: true
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
EntityContext.tsx:173 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_RESPONSE: Status 200 OK
EntityContext.tsx:180 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_SUCCESS: Got successful response, parsing JSON...
EntityContext.tsx:185 ARCHITECT_DEBUG_ENTITY_CTX_DATA_RECEIVED: Fetched entitiesData length: 50
EntityContext.tsx:186 ARCHITECT_DEBUG_ENTITY_CTX_DATA_RECEIVED: First few entities: Array(2)
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityLayout.tsx:76 EntityLayout: Context still loading - showing spinner Object
EntityLayout.tsx:35 EntityLayout: Setting client ID from URL params: 73
EntityContext.tsx:78 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
EntityContext.tsx:231 ENTITY_CONTEXT_STATE_POST_FETCH: 
        - Total entities: 50
        - Auth loading: false
        - Query state: Success=true, Loading=false, Error=false
EntityContext.tsx:240 ARCHITECT_DEBUG_ENTITY_CTX_STATE_POST_FETCH: Object
EntityContext.tsx:250 DEBUG: Initial entities loading completed successfully
EntityContext.tsx:258 ENTITY_CONTEXT_LOADING_STATE_CHANGE: 
        From true to false
        - Auth loading: false
        - Query loading: false
        - Fetching: false
        - Initial load complete: false
EntityContext.tsx:276 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
EntityContext.tsx:293 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Loading state detected, deferring entity selection logic: Object
EntityContext.tsx:321 DEBUG: Entities context state:
    - Total entities: 50
    - Filtered entities: 4
    - Selected client: 73
    - Current entity: undefined
    - Initial loading complete: false
    - Loading: true
    - Query fetching: false
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityLayout.tsx:120 EntityLayout: Context ready - rendering Outlet Object
GlobalContextSelector.tsx:375 ARCHITECT_DEBUG_PHANTOM: Client 73 (ONE1) - isEntitySelectionView: true, expandedClients[73]: false, isExpanded: false, path: /clients/73/entities/240/journal-entries, selectedClientId: 73, currentEntity: undefined
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 73 - showEntities: true, filteredEntities: 4, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 235 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 250 - showEntities: true, filteredEntities: 2, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 251 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
JournalEntries.tsx:100 No data available for journal entries
JournalEntries.tsx:82 DEBUG: Fetching journal entries from: /api/clients/73/entities/240/journal-entries
EntityLayout.tsx:35 EntityLayout: Setting client ID from URL params: 73
EntityContext.tsx:78 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
EntityLayout.tsx:65 EntityLayout: Found entity in loaded entities, setting current entity: ONE11
EntityContext.tsx:276 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
EntityContext.tsx:299 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client selection changed: Object
EntityContext.tsx:321 DEBUG: Entities context state:
    - Total entities: 50
    - Filtered entities: 4
    - Selected client: 73
    - Current entity: undefined
    - Initial loading complete: true
    - Loading: false
    - Query fetching: false
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityLayout.tsx:120 EntityLayout: Context ready - rendering Outlet Object
GlobalContextSelector.tsx:375 ARCHITECT_DEBUG_PHANTOM: Client 73 (ONE1) - isEntitySelectionView: true, expandedClients[73]: true, isExpanded: true, path: /clients/73/entities/240/journal-entries, selectedClientId: 73, currentEntity: 240
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 73 - showEntities: true, filteredEntities: 4, isExpanded: true, isEntitySelectionView: true, shouldShow: true
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 235 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 250 - showEntities: true, filteredEntities: 2, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 251 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
EntityLayout.tsx:35 EntityLayout: Setting client ID from URL params: 73
EntityContext.tsx:78 ARCHITECT_DEBUG_SELECTOR_STATE: Setting client ID to 73
EntityLayout.tsx:65 EntityLayout: Found entity in loaded entities, setting current entity: ONE11
EntityContext.tsx:276 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client changed to 73, invalidating related queries
EntityContext.tsx:299 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Client selection changed: Object
EntityContext.tsx:321 DEBUG: Entities context state:
    - Total entities: 50
    - Filtered entities: 4
    - Selected client: 73
    - Current entity: 240
    - Initial loading complete: true
    - Loading: false
    - Query fetching: false
EntityContext.tsx:92 ENTITY_CONTEXT_AUTH_STATE: Object
EntityContext.tsx:100 ARCHITECT_DEBUG_ENTITY_CTX_QUERY_CONFIG: UserExists= true AuthNotLoading= true QueryEnabled= true
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
EntityContext.tsx:289 ARCHITECT_DEBUG_ENTITY_CTX_CLIENT_CHANGE: Query invalidation completed for client 73
GlobalContextSelector.tsx:375 ARCHITECT_DEBUG_PHANTOM: Client 73 (ONE1) - isEntitySelectionView: true, expandedClients[73]: true, isExpanded: true, path: /clients/73/entities/240/journal-entries, selectedClientId: 73, currentEntity: 240
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 73 - showEntities: true, filteredEntities: 4, isExpanded: true, isEntitySelectionView: true, shouldShow: true
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 235 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 250 - showEntities: true, filteredEntities: 2, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 251 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
JournalEntries.tsx:109 DEBUG - JournalEntries - Raw entries: Array(1)
JournalEntries.tsx:114 DEBUG - Entry 481 structure: Array(29)
JournalEntries.tsx:119 DEBUG - Using pre-calculated totals for entry 481: debit=1, credit=1
GlobalContextSelector.tsx:375 ARCHITECT_DEBUG_PHANTOM: Client 73 (ONE1) - isEntitySelectionView: true, expandedClients[73]: false, isExpanded: false, path: /clients/73/entities/240/journal-entries/481, selectedClientId: 73, currentEntity: 240
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 73 - showEntities: true, filteredEntities: 4, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 235 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 250 - showEntities: true, filteredEntities: 2, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 251 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
JournalEntryDetail.tsx:155 JournalEntryDetail: Route params - clientId: 73 entityId: 240 entryId: 481
JournalEntryDetail.tsx:596 JournalEntryDetail: Using clientId 73 for API requests (from param: 73 or entity: 73 )
JournalEntryDetail.tsx:719 entry at render undefined
JournalEntryDetail.tsx:720 DEBUG - JournalEntryDetail - Using entry: undefined
GlobalContextSelector.tsx:375 ARCHITECT_DEBUG_PHANTOM: Client 73 (ONE1) - isEntitySelectionView: true, expandedClients[73]: true, isExpanded: true, path: /clients/73/entities/240/journal-entries/481, selectedClientId: 73, currentEntity: 240
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 73 - showEntities: true, filteredEntities: 4, isExpanded: true, isEntitySelectionView: true, shouldShow: true
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 235 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 250 - showEntities: true, filteredEntities: 2, isExpanded: false, isEntitySelectionView: true, shouldShow: false
GlobalContextSelector.tsx:436 ARCHITECT_DEBUG_ENTITY_LIST: Client 251 - showEntities: true, filteredEntities: 1, isExpanded: false, isEntitySelectionView: true, shouldShow: false
JournalEntryDetail.tsx:155 JournalEntryDetail: Route params - clientId: 73 entityId: 240 entryId: 481
JournalEntryDetail.tsx:596 JournalEntryDetail: Using clientId 73 for API requests (from param: 73 or entity: 73 )
JournalEntryDetail.tsx:630 DEBUG - AccountsMap - Accounts array: Array(74)
JournalEntryDetail.tsx:719 entry at render undefined
JournalEntryDetail.tsx:720 DEBUG - JournalEntryDetail - Using entry: undefined
JournalEntryDetail.tsx:155 JournalEntryDetail: Route params - clientId: 73 entityId: 240 entryId: 481
JournalEntryDetail.tsx:596 JournalEntryDetail: Using clientId 73 for API requests (from param: 73 or entity: 73 )
JournalEntryDetail.tsx:706 DEBUG - JournalEntryDetail - Data type: object
JournalEntryDetail.tsx:707 DEBUG - JournalEntryDetail - Data structure: Object
JournalEntryDetail.tsx:719 entry at render Object
JournalEntryDetail.tsx:720 DEBUG - JournalEntryDetail - Using entry: Object
JournalEntryDetail.tsx:724 DEBUG - JournalEntryDetail - Data has journalEntry property: false
JournalEntryDetail.tsx:725 DEBUG - JournalEntryDetail - Data has id property: true
JournalEntryDetail.tsx:726 DEBUG - JournalEntryDetail - Data has lines property: true
JournalEntryDetail.tsx:732 DEBUG - JournalEntryDetail - First line format: Server format (type/amount)
JournalEntryDetail.tsx:736 DEBUG - JournalEntryDetail - First line properties: Array(18)
JournalEntryDetail.tsx:1653 ARCHITECT_DEBUG: Button visibility check. Entry ID: 481, Status: draft
JournalEntryDetail.tsx:1198 DEBUG: Permission matrix: Object
JournalEntryDetail.tsx:1824 Line 0: debitValue=1, creditValue=0, line= Object
JournalEntryDetail.tsx:1824 Line 1: debitValue=0, creditValue=1, line= Object
JournalEntryDetail.tsx:1886 ARCHITECT_DEBUG_DETAIL_ATTACHMENT_PERMISSIONS: Object
