Next focus: fix/je-date-and-draft-edit branch
Now that the docs-only PR is staged, jump straight into the two blocking bugs. Follow the steps below so we can merge a clean, green patch and move on to the Dimensions sprint.

1 Branch & setup
bash
Copy
Edit
git checkout -b fix/je-date-and-draft-edit
If you’re using Replit’s UI, just create the branch with that exact name.

2 Bug #1 – Wrong JE date recorded
Layer	Action	File / Hint
DB	Ensure the journal_entries.date column is plain DATE (no TZ). If it’s TIMESTAMPTZ, run a migration: ALTER TABLE journal_entries ALTER COLUMN date TYPE DATE USING date::date;	migrations/2025-05-je_date.sql
Backend	In journalEntryRoutes.ts, treat req.body.date as a string. Do not wrap it in new Date(). Just pass the string to the query builder.	ts const { date, ...rest } = req.body; await jeStorage.create({ date, ...rest });
Frontend	In JournalEntryForm.tsx, format picker value before save:	ts const isoDate = format(selectedDate, 'yyyy-MM-dd'); mutation.mutate({ …, date: isoDate });
Unit test	test/jeDate.test.ts – create JE with 2025-05-01, fetch, expect 2025-05-01. Use supertest to hit the API.	

3 Bug #2 – Draft entries can’t edit attachments
Checkpoint	What to do
UI guard	In both JournalEntryForm.tsx and JournalEntryDetail.tsx replace:
const isAttachmentsDisabled = status !== 'draft' && status !== 'pending_approval';
with
`const isAttachmentsDisabled = !(status === 'draft'
Backend guard	In journalEntryRoutes.ts attachment POST handler, allow when `entry.status === 'draft'
Test	New Jest spec test/jeDraftAttachment.test.ts
1. Create draft JE → upload small file → expect 200.
2. Change status to posted → upload again → expect 403.

4 Testing pipeline
Unit only for this PR (skip Cypress for now):

bash
Copy
Edit
npx jest --runInBand --detectOpenHandles
If a timeout remains, run the failing spec with --detectOpenHandles to catch leaks.

Ensure ESLint passes:

bash
Copy
Edit
npx eslint . --ext .ts,.tsx --fix
npx prettier . --write
5 Commit messages
bash
Copy
Edit
git add .
git commit -m "fix: store JE date as YYYY-MM-DD (no TZ shift)"
git commit -am "fix: enable attachment edits while JE is draft"
git commit -am "test: add JE date & draft-attachment regression specs"
git push --set-upstream origin fix/je-date-and-draft-edit
Open the PR titled:

vbnet
Copy
Edit
fix: correct JE date TZ & allow draft-attachment edits
6 After merge
Close both bugs in the tracker.

Confirm in UI:

Set JE date to May 1 2025 → list shows May 1 2025.

Draft JE lets you upload / delete files; posted JE blocks.

Then we’ll kick off Dimensions thin slice (Task B.2.1).

Ping me with any unexpected stack traces or open-handle lines—you’ll have my help right away.