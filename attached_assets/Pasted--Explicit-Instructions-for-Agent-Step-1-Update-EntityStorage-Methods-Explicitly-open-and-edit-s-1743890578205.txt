ðŸŽ¯ Explicit Instructions for Agent
âœ… Step 1: Update EntityStorage Methods
Explicitly open and edit server/storage/entityStorage.ts. Replace the methods exactly with this code:

1. setEntityInactive Method:

typescript
Copy
Edit
async setEntityInactive(entityId: number): Promise<Entity | null> {
  const [entity] = await this.db.execute(sql`
    UPDATE entities SET active = false, deleted_at = NULL WHERE id = ${entityId}
    RETURNING *;
  `);
  return entity;
}
2. restoreEntity Method:

typescript
Copy
Edit
async restoreEntity(entityId: number): Promise<Entity | null> {
  const [entity] = await this.db.execute(sql`
    UPDATE entities SET active = true, deleted_at = NULL WHERE id = ${entityId}
    RETURNING *;
  `);
  return entity;
}
3. deleteEntity Method:

typescript
Copy
Edit
async deleteEntity(entityId: number): Promise<Entity | null> {
  const [entity] = await this.db.execute(sql`
    UPDATE entities SET active = false, deleted_at = NOW() WHERE id = ${entityId}
    RETURNING *;
  `);
  return entity;
}
âœ… Step 2: Explicitly Update Verification Routes
Explicitly open and edit server/routes/verificationRoutes.ts. Clearly update your routes as follows:

/entities/:id/set-inactive endpoint:

typescript
Copy
Edit
router.post('/entities/:id/set-inactive', async (req, res) => {
  const entity = await storage.entities.setEntityInactive(parseInt(req.params.id));
  if (entity) {
    res.json({
      id: entity.id,
      active: entity.active,
      deletedAt: entity.deleted_at || null
    });
  } else {
    res.status(404).json({ error: "Entity not found" });
  }
});
/entities/:id/restore endpoint:

typescript
Copy
Edit
router.post('/entities/:id/restore', async (req, res) => {
  const entity = await storage.entities.restoreEntity(parseInt(req.params.id));
  if (entity) {
    res.json({
      id: entity.id,
      active: entity.active,
      deletedAt: entity.deleted_at || null
    });
  } else {
    res.status(404).json({ error: "Entity not found or not deleted" });
  }
});
âœ… Step 3: Run Verification Script Explicitly
Run the verification script immediately after these changes:

bash
Copy
Edit
cd verification-scripts
node verify-entity-states.js
âœ… Step 4: Explicitly Document Results
Explicitly update docs/VERIFICATION_STATUS.md with:

Explicit pass/fail statuses clearly listed.

Explicit error messages or issues clearly documented.

Recommendations clearly provided if issues remain.

ðŸŽ¯ Complete These Steps Explicitly and Report Back
Explicitly confirm once these instructions have been completed or explicitly highlight any further issues clearly.