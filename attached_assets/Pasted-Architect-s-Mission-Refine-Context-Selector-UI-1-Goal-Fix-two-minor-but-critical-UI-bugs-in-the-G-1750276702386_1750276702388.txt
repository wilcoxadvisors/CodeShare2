Architect's Mission: Refine Context Selector UI
1. Goal

Fix two minor but critical UI bugs in the GlobalContextSelector to ensure its presentation is always perfectly aligned with the current page's context.

Bug 1 (Phantom Checkmark): Remove the checkmark next to an entity when viewing a client-only page (e.g., Chart of Accounts).
Bug 2 (Unnecessary Chevrons): Remove the expandable ">" chevrons from clients when viewing a client-only page (e.g., Dimensions).
2. Root Cause Analysis

The GlobalContextSelector currently displays entity-related UI elements (checkmarks and expansion chevrons) based only on the data in EntityContext (currentEntityId, list of entities). It does not factor in whether the current view (the route) actually uses entities. This creates a visual mismatch where the selector implies an entity can be chosen, even on pages where that is impossible.

The solution is to make the selector's rendering logic smarter by making it aware of the current route.

3. Definitive Fix Plan

All changes will be precisely targeted within the client/src/components/dashboard/GlobalContextSelector.tsx file.

Introduce Route Awareness:

Inside the GlobalContextSelector component, use the useLocation hook from react-router-dom to get access to the current URL path: const location = useLocation();.
Create a clear, explicit boolean flag that determines if the current page is a view that requires entity selection. Client-only pages like Chart of Accounts and Dimensions should result in this flag being false.
Define this flag near the top of the component: const isEntitySelectionView = !location.pathname.includes('/chart-of-accounts') && !location.pathname.includes('/manage/dimensions');
Fix Phantom Checkmark (Bug 1):

Find the code block that renders the list of entities for an expanded client (it will be a .map() over filteredEntities).
Inside this block, locate the <Check> icon component.
Modify the condition that controls its visibility. The checkmark should only appear if an entity is currently selected AND we are on a page that actually uses entities.
Update the logic for the className of the <Check> icon to: className={cn("mr-2 h-4 w-4", currentEntityId === entity.id && isEntitySelectionView ? "opacity-100" : "opacity-0")}
Fix Unnecessary Chevrons (Bug 2):

Find the code block that renders the list of clients (a .map() over clients).
Locate the chevron icon (<ChevronRight /> or <ChevronDown />).
Wrap the entire chevron icon element in a conditional render that only displays it if we are in an entity selection view.
Use the flag from step 1: {isEntitySelectionView && ( <Chevron.../> )}.
This will cause the chevrons to disappear completely on the Chart of Accounts and Dimensions pages, correctly indicating that the clients are not expandable items in that context.
4. Expected Outcome

When viewing Chart of Accounts or Dimensions: The client list will appear without any ">" chevrons. Clicking a client will correctly navigate to that client's specific CoA/Dimensions page. No entity will ever show a checkmark.
When viewing Journal Entries: The selector will function as before, with expandable chevrons and a checkmark correctly indicating the active entity for that view.
The UI of the GlobalContextSelector will now be perfectly synchronized with the context of the page, providing a more intuitive, intelligent, and professional user experience that meets our high standards.